version: '3.2'

services:
  ## Build node server Container
  api-node:
    build: ./api-node
    restart: always
    tty: true
    environment:
      - 'MESSAGE=no. 1'
    ports:
        - "8000:8000"
    depends_on:
        - redis

  ## Build redis Container
  redis:
    build: ./db-redis
    restart: always
    container_name: redis
    tty: true
    environment:
      - 'ALLOW_EMPTY_PASSWORDS=yes'
    ports:
      - '6379:6379'
    volumes:
      - 'redis_data:/data/redis'

volumes:
    backend:
    redis_data:
